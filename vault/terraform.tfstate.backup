{
  "version": 4,
  "terraform_version": "1.13.3",
  "serial": 80,
  "lineage": "c12c9767-993a-7d0e-2ace-bcdb2d452c84",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "kubernetes_config_map_v1",
      "name": "kube_root_ca",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "binary_data": {},
            "data": {
              "ca.crt": "-----BEGIN CERTIFICATE-----\nMIIBiTCCAS+gAwIBAgIQZoCZ1BGYjnCGJ1HMybPxKDAKBggqhkjOPQQDAjAVMRMw\nEQYDVQQKEwprdWJlcm5ldGVzMB4XDTI1MTAwOTEzMDAyNVoXDTM1MTAwNzEzMDAy\nNVowFTETMBEGA1UEChMKa3ViZXJuZXRlczBZMBMGByqGSM49AgEGCCqGSM49AwEH\nA0IABAGdXwcozYt6tvT+FjXTEybY7udFIBxZITAMowh/ja91gTFYVxgLMIPqdV48\nIWOYj0gTOxb0c/z7A295/0VGxB+jYTBfMA4GA1UdDwEB/wQEAwIChDAdBgNVHSUE\nFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwDwYDVR0TAQH/BAUwAwEB/zAdBgNVHQ4E\nFgQUjl63VX75zdBJVZ7eMHG96H8Zha4wCgYIKoZIzj0EAwIDSAAwRQIhAJuGZMyW\nV/PrB01BDmIqMRB/TsFyOKsvDZjFFv4LBz+WAiBdEibUCxoObk2fin+ugdSVxdR9\nrhipEecmBovp2Whn7A==\n-----END CERTIFICATE-----\n"
            },
            "id": "kube-system/kube-root-ca.crt",
            "immutable": false,
            "metadata": [
              {
                "annotations": {
                  "kubernetes.io/description": "Contains a CA bundle that can be used to verify the kube-apiserver when using internal endpoints such as the internal service IP or kubernetes.default.svc. No other usage is guaranteed across distributions of Kubernetes clusters."
                },
                "generation": 0,
                "labels": {},
                "name": "kube-root-ca.crt",
                "namespace": "kube-system",
                "resource_version": "304",
                "uid": "659d2b8d-c79e-45c0-91e3-9e25e27dcde3"
              }
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "kubernetes_namespace",
      "name": "vault",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "vault",
            "metadata": [
              {
                "annotations": {},
                "generation": 0,
                "labels": {
                  "kubernetes.io/metadata.name": "vault"
                },
                "name": "vault",
                "resource_version": "433592",
                "uid": "470c72b7-c270-41a6-a1f4-bb5e0bcffad8"
              }
            ],
            "spec": [
              {
                "finalizers": [
                  "kubernetes"
                ]
              }
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "managed",
      "type": "kubectl_manifest",
      "name": "vault_unseal_cronjob",
      "provider": "provider[\"registry.terraform.io/gavinbunney/kubectl\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "api_version": "batch/v1",
            "apply_only": false,
            "force_conflicts": false,
            "force_new": false,
            "id": "/apis/batch/v1/namespaces/vault/cronjobs/vault-auto-unseal",
            "ignore_fields": null,
            "kind": "CronJob",
            "live_manifest_incluster": "a18142f70c51ec487539d1eab15c4c574fee07f8886ecc5ba4fa8a8107e9e931",
            "live_uid": "2af721cc-e536-4a4d-997c-d899abde4a72",
            "name": "vault-auto-unseal",
            "namespace": "vault",
            "override_namespace": null,
            "sensitive_fields": null,
            "server_side_apply": false,
            "timeouts": null,
            "uid": "2af721cc-e536-4a4d-997c-d899abde4a72",
            "validate_schema": true,
            "wait": null,
            "wait_for_rollout": true,
            "yaml_body": "apiVersion: batch/v1\nkind: CronJob\nmetadata:\n  name: vault-auto-unseal\n  namespace: vault\nspec:\n  schedule: \"*/5 * * * *\"\n  jobTemplate:\n    spec:\n      template:\n        spec:\n          serviceAccountName: vault-unseal\n          restartPolicy: OnFailure\n          containers:\n          - name: unseal\n            image: bitnami/kubectl:latest\n            command: [\"/bin/bash\", \"-c\"]\n            args:\n            - |\n              # Find any running vault pod, not just vault-0\n              VAULT_POD=$(kubectl get pod -n vault -l app.kubernetes.io/name=vault -o jsonpath='{.items[?(@.status.phase==\"Running\")].metadata.name}' | cut -d' ' -f1)\n              if [ -z \"$VAULT_POD\" ]; then\n                echo \"No running vault pod found.\"\n                exit 1\n              fi\n              # Check if vault is sealed (exit code 2 means sealed)\n              if ! kubectl exec -n vault $VAULT_POD -- vault status \u003e /dev/null 2\u003e\u00261; then\n                echo \"Vault is sealed, unsealing...\"\n                kubectl exec -n vault $VAULT_POD -- vault operator unseal $KEY1\n                kubectl exec -n vault $VAULT_POD -- vault operator unseal $KEY2\n                kubectl exec -n vault $VAULT_POD -- vault operator unseal $KEY3\n                echo \"Unseal complete\"\n              else\n                echo \"Vault is already unsealed\"\n              fi\n            env:\n            - name: KEY1\n              valueFrom:\n                secretKeyRef:\n                  name: vault-unseal-keys\n                  key: key1\n            - name: KEY2\n              valueFrom:\n                secretKeyRef:\n                  name: vault-unseal-keys\n                  key: key2\n            - name: KEY3\n              valueFrom:\n                secretKeyRef:\n                  name: vault-unseal-keys\n                  key: key3\n",
            "yaml_body_parsed": "apiVersion: batch/v1\nkind: CronJob\nmetadata:\n  name: vault-auto-unseal\n  namespace: vault\nspec:\n  jobTemplate:\n    spec:\n      template:\n        spec:\n          containers:\n          - args:\n            - |\n              # Find any running vault pod, not just vault-0\n              VAULT_POD=$(kubectl get pod -n vault -l app.kubernetes.io/name=vault -o jsonpath='{.items[?(@.status.phase==\"Running\")].metadata.name}' | cut -d' ' -f1)\n              if [ -z \"$VAULT_POD\" ]; then\n                echo \"No running vault pod found.\"\n                exit 1\n              fi\n              # Check if vault is sealed (exit code 2 means sealed)\n              if ! kubectl exec -n vault $VAULT_POD -- vault status \u003e /dev/null 2\u003e\u00261; then\n                echo \"Vault is sealed, unsealing...\"\n                kubectl exec -n vault $VAULT_POD -- vault operator unseal $KEY1\n                kubectl exec -n vault $VAULT_POD -- vault operator unseal $KEY2\n                kubectl exec -n vault $VAULT_POD -- vault operator unseal $KEY3\n                echo \"Unseal complete\"\n              else\n                echo \"Vault is already unsealed\"\n              fi\n            command:\n            - /bin/bash\n            - -c\n            env:\n            - name: KEY1\n              valueFrom:\n                secretKeyRef:\n                  key: key1\n                  name: vault-unseal-keys\n            - name: KEY2\n              valueFrom:\n                secretKeyRef:\n                  key: key2\n                  name: vault-unseal-keys\n            - name: KEY3\n              valueFrom:\n                secretKeyRef:\n                  key: key3\n                  name: vault-unseal-keys\n            image: bitnami/kubectl:latest\n            name: unseal\n          restartPolicy: OnFailure\n          serviceAccountName: vault-unseal\n  schedule: '*/5 * * * *'\n",
            "yaml_incluster": "a18142f70c51ec487539d1eab15c4c574fee07f8886ecc5ba4fa8a8107e9e931"
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "live_manifest_incluster"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "yaml_body"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "yaml_incluster"
              }
            ]
          ],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.kubernetes_namespace.vault",
            "kubernetes_role.vault_unseal",
            "kubernetes_role_binding.vault_unseal",
            "kubernetes_service_account.vault_unseal"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "kubernetes_cluster_role_binding_v1",
      "name": "vault_token_reviewer",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "vault-token-reviewer-binding",
            "metadata": [
              {
                "annotations": null,
                "generate_name": "",
                "generation": 0,
                "labels": null,
                "name": "vault-token-reviewer-binding",
                "resource_version": "444360",
                "uid": "a56a8686-cdd8-4c83-adb3-2c79ed9fd92f"
              }
            ],
            "role_ref": [
              {
                "api_group": "rbac.authorization.k8s.io",
                "kind": "ClusterRole",
                "name": "system:auth-delegator"
              }
            ],
            "subject": [
              {
                "api_group": "",
                "kind": "ServiceAccount",
                "name": "vault-token-reviewer",
                "namespace": "vault"
              }
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "rbac.authorization.k8s.io/v1",
            "kind": "ClusterRoleBinding",
            "name": "vault-token-reviewer-binding"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "kubernetes_service_account_v1.vault_reviewer"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "kubernetes_role",
      "name": "vault_unseal",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "vault/vault-unseal",
            "metadata": [
              {
                "annotations": null,
                "generate_name": "",
                "generation": 0,
                "labels": null,
                "name": "vault-unseal",
                "namespace": "vault",
                "resource_version": "444356",
                "uid": "04c71c8a-3282-455f-add4-e16dc9100e52"
              }
            ],
            "rule": [
              {
                "api_groups": [
                  ""
                ],
                "resource_names": null,
                "resources": [
                  "pods"
                ],
                "verbs": [
                  "get",
                  "list"
                ]
              },
              {
                "api_groups": [
                  ""
                ],
                "resource_names": null,
                "resources": [
                  "pods/exec"
                ],
                "verbs": [
                  "create"
                ]
              }
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "rbac.authorization.k8s.io/v1",
            "kind": "Role",
            "name": "vault-unseal",
            "namespace": "vault"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "data.kubernetes_namespace.vault"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "kubernetes_role_binding",
      "name": "vault_unseal",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "vault/vault-unseal",
            "metadata": [
              {
                "annotations": null,
                "generate_name": "",
                "generation": 0,
                "labels": null,
                "name": "vault-unseal",
                "namespace": "vault",
                "resource_version": "444362",
                "uid": "7b58c0b1-220e-4c42-886b-6df29bc25251"
              }
            ],
            "role_ref": [
              {
                "api_group": "rbac.authorization.k8s.io",
                "kind": "Role",
                "name": "vault-unseal"
              }
            ],
            "subject": [
              {
                "api_group": "",
                "kind": "ServiceAccount",
                "name": "vault-unseal",
                "namespace": "vault"
              }
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "rbac.authorization.k8s.io/v1",
            "kind": "RoleBinding",
            "name": "vault-unseal",
            "namespace": "vault"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "data.kubernetes_namespace.vault",
            "kubernetes_role.vault_unseal",
            "kubernetes_service_account.vault_unseal"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "kubernetes_secret_v1",
      "name": "vault_reviewer_token",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "binary_data": null,
            "binary_data_wo": null,
            "binary_data_wo_revision": null,
            "data": {
              "ca.crt": "-----BEGIN CERTIFICATE-----\nMIIBiTCCAS+gAwIBAgIQZoCZ1BGYjnCGJ1HMybPxKDAKBggqhkjOPQQDAjAVMRMw\nEQYDVQQKEwprdWJlcm5ldGVzMB4XDTI1MTAwOTEzMDAyNVoXDTM1MTAwNzEzMDAy\nNVowFTETMBEGA1UEChMKa3ViZXJuZXRlczBZMBMGByqGSM49AgEGCCqGSM49AwEH\nA0IABAGdXwcozYt6tvT+FjXTEybY7udFIBxZITAMowh/ja91gTFYVxgLMIPqdV48\nIWOYj0gTOxb0c/z7A295/0VGxB+jYTBfMA4GA1UdDwEB/wQEAwIChDAdBgNVHSUE\nFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwDwYDVR0TAQH/BAUwAwEB/zAdBgNVHQ4E\nFgQUjl63VX75zdBJVZ7eMHG96H8Zha4wCgYIKoZIzj0EAwIDSAAwRQIhAJuGZMyW\nV/PrB01BDmIqMRB/TsFyOKsvDZjFFv4LBz+WAiBdEibUCxoObk2fin+ugdSVxdR9\nrhipEecmBovp2Whn7A==\n-----END CERTIFICATE-----\n",
              "namespace": "vault",
              "token": "eyJhbGciOiJSUzI1NiIsImtpZCI6IkdMWkh5cHpablBjRmhrSlM5R1BJSUpoejlUMXVWMUFHS0FPWVRWVUhDZncifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJ2YXVsdCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJ2YXVsdC10b2tlbi1yZXZpZXdlci1zZWNyZXQiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoidmF1bHQtdG9rZW4tcmV2aWV3ZXIiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiJjZDYxODZkMi00MGZhLTQ2ZDAtOThlNy0zOTI1M2Y4ZDdiMmQiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6dmF1bHQ6dmF1bHQtdG9rZW4tcmV2aWV3ZXIifQ.y4ci1_Tgnq9-QDngokPH-PK5aGktHphOMdEk-DTf7yq_gj4504bz3krOyAh0ovq3wSMOpuYE_keia0Nmbt9TgscCddrb4GFjLAF-ixswRYBmpko8-WjHyaxkFJg1tv1KcG-9Ga9IVdjvs4uFq8P3aBM6KC5Ln2GQAfHf-4TCD1-idJuIRap3XLl2QUjdChCXky2XXmbbK1hqw1yLrNYIdrFUbUfuGnX79m-7qMMKhpkXOjpui2nOHa2wBkebFYnFxwEHSxtGAALRcO9wUgeZGiLOoOgqvdgikk5K_vr_K25whlC-US5oFWZKgGMq4QVdR7aZkTkMC5uX5v1ivYdBd4l10r_IwIlVmhYgdtlPDZ2aBQ6z8TBpVnxJdwTogy6-djV1HTQKkWyPpnHX31Y0go9vxD3TTrY1KUkOYpv6bFBJR9x6p5B2lM6_5TSr9esTa-UYM0vn7Zf9kUBf5ngSAo5Dk-9yGcnQHvBSJR_YIQFZgZQL-7kPvIs57kKlFD7WBgN1SYsjBcrpkmbgWvX_CWSSNd67CHbBJlg0BbSe7ZoMyhVdJ4OMyzvRQy39AktBymOY2gvaIPMtedhyiNV9DQCuPTvy1sw6ZW_jAncpTSHBl_-ZINkd2_81l-Q5VSPrDJbCZ1xqDwOH0agmPC_2KTq0oOjFnLIcVVKo8jtwoOc"
            },
            "data_wo": null,
            "data_wo_revision": null,
            "id": "vault/vault-token-reviewer-secret",
            "immutable": false,
            "metadata": [
              {
                "annotations": {
                  "kubernetes.io/service-account.name": "vault-token-reviewer"
                },
                "generate_name": "",
                "generation": 0,
                "labels": null,
                "name": "vault-token-reviewer-secret",
                "namespace": "vault",
                "resource_version": "444365",
                "uid": "fbf48376-9730-4e7d-804c-2fc6b4482649"
              }
            ],
            "timeouts": null,
            "type": "kubernetes.io/service-account-token",
            "wait_for_service_account_token": true
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "binary_data"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              }
            ]
          ],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Secret",
            "name": "vault-token-reviewer-secret",
            "namespace": "vault"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMH19",
          "dependencies": [
            "kubernetes_service_account_v1.vault_reviewer"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "kubernetes_service_account",
      "name": "vault_unseal",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "automount_service_account_token": true,
            "default_secret_name": "",
            "id": "vault/vault-unseal",
            "image_pull_secret": [],
            "metadata": [
              {
                "annotations": null,
                "generate_name": "",
                "generation": 0,
                "labels": null,
                "name": "vault-unseal",
                "namespace": "vault",
                "resource_version": "444358",
                "uid": "814a8319-d05b-4036-a6ac-c1ba3aa6bf0d"
              }
            ],
            "secret": [],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "ServiceAccount",
            "name": "vault-unseal",
            "namespace": "vault"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMH19",
          "dependencies": [
            "data.kubernetes_namespace.vault"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "kubernetes_service_account_v1",
      "name": "eso_sa",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "automount_service_account_token": true,
            "default_secret_name": "",
            "id": "vault/external-secrets",
            "image_pull_secret": [],
            "metadata": [
              {
                "annotations": null,
                "generate_name": "",
                "generation": 0,
                "labels": null,
                "name": "external-secrets",
                "namespace": "vault",
                "resource_version": "444357",
                "uid": "ca2719f2-81f1-4078-8bde-0b0bfa86ca6e"
              }
            ],
            "secret": [],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "ServiceAccount",
            "name": "external-secrets",
            "namespace": "vault"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "kubernetes_service_account_v1",
      "name": "vault_reviewer",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "automount_service_account_token": true,
            "default_secret_name": "",
            "id": "vault/vault-token-reviewer",
            "image_pull_secret": [],
            "metadata": [
              {
                "annotations": null,
                "generate_name": "",
                "generation": 0,
                "labels": null,
                "name": "vault-token-reviewer",
                "namespace": "vault",
                "resource_version": "444359",
                "uid": "cd6186d2-40fa-46d0-98e7-39253f8d7b2d"
              }
            ],
            "secret": [],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "ServiceAccount",
            "name": "vault-token-reviewer",
            "namespace": "vault"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vault_auth_backend",
      "name": "kubernetes",
      "provider": "provider[\"registry.terraform.io/hashicorp/vault\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "accessor": "auth_kubernetes_d2368a11",
            "description": "",
            "disable_remount": false,
            "id": "kubernetes",
            "local": false,
            "namespace": null,
            "path": "kubernetes",
            "tune": [],
            "type": "kubernetes"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vault_kubernetes_auth_backend_config",
      "name": "k8s_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/vault\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "backend": "kubernetes",
            "disable_iss_validation": false,
            "disable_local_ca_jwt": true,
            "id": "auth/kubernetes/config",
            "issuer": "",
            "kubernetes_ca_cert": "-----BEGIN CERTIFICATE-----\nMIIBiTCCAS+gAwIBAgIQZoCZ1BGYjnCGJ1HMybPxKDAKBggqhkjOPQQDAjAVMRMw\nEQYDVQQKEwprdWJlcm5ldGVzMB4XDTI1MTAwOTEzMDAyNVoXDTM1MTAwNzEzMDAy\nNVowFTETMBEGA1UEChMKa3ViZXJuZXRlczBZMBMGByqGSM49AgEGCCqGSM49AwEH\nA0IABAGdXwcozYt6tvT+FjXTEybY7udFIBxZITAMowh/ja91gTFYVxgLMIPqdV48\nIWOYj0gTOxb0c/z7A295/0VGxB+jYTBfMA4GA1UdDwEB/wQEAwIChDAdBgNVHSUE\nFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwDwYDVR0TAQH/BAUwAwEB/zAdBgNVHQ4E\nFgQUjl63VX75zdBJVZ7eMHG96H8Zha4wCgYIKoZIzj0EAwIDSAAwRQIhAJuGZMyW\nV/PrB01BDmIqMRB/TsFyOKsvDZjFFv4LBz+WAiBdEibUCxoObk2fin+ugdSVxdR9\nrhipEecmBovp2Whn7A==\n-----END CERTIFICATE-----\n",
            "kubernetes_host": "https://kubernetes.default.svc",
            "namespace": null,
            "pem_keys": null,
            "token_reviewer_jwt": "eyJhbGciOiJSUzI1NiIsImtpZCI6IkdMWkh5cHpablBjRmhrSlM5R1BJSUpoejlUMXVWMUFHS0FPWVRWVUhDZncifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJ2YXVsdCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJ2YXVsdC10b2tlbi1yZXZpZXdlci1zZWNyZXQiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoidmF1bHQtdG9rZW4tcmV2aWV3ZXIiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiJjZDYxODZkMi00MGZhLTQ2ZDAtOThlNy0zOTI1M2Y4ZDdiMmQiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6dmF1bHQ6dmF1bHQtdG9rZW4tcmV2aWV3ZXIifQ.y4ci1_Tgnq9-QDngokPH-PK5aGktHphOMdEk-DTf7yq_gj4504bz3krOyAh0ovq3wSMOpuYE_keia0Nmbt9TgscCddrb4GFjLAF-ixswRYBmpko8-WjHyaxkFJg1tv1KcG-9Ga9IVdjvs4uFq8P3aBM6KC5Ln2GQAfHf-4TCD1-idJuIRap3XLl2QUjdChCXky2XXmbbK1hqw1yLrNYIdrFUbUfuGnX79m-7qMMKhpkXOjpui2nOHa2wBkebFYnFxwEHSxtGAALRcO9wUgeZGiLOoOgqvdgikk5K_vr_K25whlC-US5oFWZKgGMq4QVdR7aZkTkMC5uX5v1ivYdBd4l10r_IwIlVmhYgdtlPDZ2aBQ6z8TBpVnxJdwTogy6-djV1HTQKkWyPpnHX31Y0go9vxD3TTrY1KUkOYpv6bFBJR9x6p5B2lM6_5TSr9esTa-UYM0vn7Zf9kUBf5ngSAo5Dk-9yGcnQHvBSJR_YIQFZgZQL-7kPvIs57kKlFD7WBgN1SYsjBcrpkmbgWvX_CWSSNd67CHbBJlg0BbSe7ZoMyhVdJ4OMyzvRQy39AktBymOY2gvaIPMtedhyiNV9DQCuPTvy1sw6ZW_jAncpTSHBl_-ZINkd2_81l-Q5VSPrDJbCZ1xqDwOH0agmPC_2KTq0oOjFnLIcVVKo8jtwoOc"
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "token_reviewer_jwt"
              }
            ]
          ],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "data.kubernetes_config_map_v1.kube_root_ca",
            "kubernetes_secret_v1.vault_reviewer_token",
            "kubernetes_service_account_v1.vault_reviewer",
            "vault_auth_backend.kubernetes"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vault_kubernetes_auth_backend_role",
      "name": "eso_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/vault\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "alias_name_source": "serviceaccount_uid",
            "audience": null,
            "backend": "kubernetes",
            "bound_service_account_names": [
              "external-secrets"
            ],
            "bound_service_account_namespaces": [
              "vault"
            ],
            "id": "auth/kubernetes/role/external-secrets",
            "namespace": null,
            "role_name": "external-secrets",
            "token_bound_cidrs": null,
            "token_explicit_max_ttl": 0,
            "token_max_ttl": 0,
            "token_no_default_policy": false,
            "token_num_uses": 0,
            "token_period": 0,
            "token_policies": [
              "external-secrets-policy"
            ],
            "token_ttl": 3600,
            "token_type": "default"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "kubernetes_service_account_v1.eso_sa",
            "vault_auth_backend.kubernetes",
            "vault_policy.eso_policy"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vault_policy",
      "name": "eso_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/vault\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "external-secrets-policy",
            "name": "external-secrets-policy",
            "namespace": null,
            "policy": "# Allow reading secret data\npath \"secret/data/*\" {\n  capabilities = [\"read\"]\n}\n\n# Allow listing and reading metadata\npath \"secret/metadata/*\" {\n  capabilities = [\"list\", \"read\"]\n}"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    }
  ],
  "check_results": null
}
